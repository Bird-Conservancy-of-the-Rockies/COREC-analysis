---
output:
  html_document: default
---
# COREC-analysis
This repository contains scripts for analysis of species abundance and diversity in relation to recreation attributes, including attributes of recreation infrastructure (trails and roads), regulation (OHV restriction on trails), and human traffic attributes compiled from anonymized smartphone GPS data. This analysis was carried out by Bird Conservancy of the Rockies, and supported with funding from Colorado Parks and Wildlife, U.S. Bureau of Land Management, and U.S. Forest Service.

# Folders
`archive` - Contains older versions of scripts not retained for final analysis and not specifically described in this README file.<br>
`documentation` - Contains markdown documentation files:<br>
   * `Analysis_methods_supplement.qmd` - Complete description of the analysis model and methods. This file was rendered first to html and then saved as a PDF using Google Chrome, and finally provided as Appendix S2 in the manuscript for this study.<br>
   * `Dryad_repo_metadata.md` - Metadata for Dryad repository accompanying the manuscript generated from this study.

# Data compilation scripts
`00A-Explore_&_compile_human_mobility_data.R` - Compiles human traffic metrics from raw files received from Mark Ditmer (USDA Rocky Mountain Research Station; not necessary to run for analysis reproducibility once `Data_compiled.RDATA` file has been compiled).<br>
`00A-List_bird_species.R` - Generates bird species list to include in analysis (not necessary to run for analysis reproducibility once `Data_compiled.RDATA` file has been compiled).<br>
`00B-Explore_&_add_veg_&_trails.R` - Compiles vegetation and management covariates (requires access to Bird Conservancy internal database; not necessary to run for analysis reproducibility once `Data_compiled.RDATA` file has been compiled).<br>
`00-Data_wrangle.R` - Compiles data for analysis to produce `Data_compiled.RDATA` (requires access to Bird Conservancy internal database; not necessary to run for analysis reproducibility once this file has already been compiled).<br>
`01A-Categorize_species.R` - Categorizes species into species groups by referencing various data sources. An intermediary csv is generated with missing values for habitat specialist assignments, and those were filled in by hand with reference to Birds of the World (reference in manuscript) species accounts.<br>
`01A-Covariate_sum_stats.R` - Generates summary values included in Table 2 of the manuscript.<br>

# Analysis
`02-Analyze.R` - Implements model fit using the R package nimble (not necessary to run if the R object file "mod_path" has already been generated).

# Results
`02-Spp_supported_relations_and_total_effects.R` - Tabulates species-specific management relationships<br>
`02-Tabulate_parameters` - Tabulates species parameter estimates for review<br>
`02-Trail_human_correlations.R` - Tabulates correlations between human traffic and management covariates<br>
`03-Plot_covariate_effects.R` - Generates figures displaying species-specific log-linear covariate relationships with abundance<br>
`03-Tabulate_components_of_total_management_effect.R` - Tabulates species-specific management relationships and percent contributions of human traffic. This file loads and adds to file generated by `02-Spp_supported_relations_and_total_effects.R`.<br>
`03-Tabulate_pct_explained.R` - Tabulates species and community total management relationships and percent explained by human traffic. This script loads/references output generated by `03-Tabulate_components_of_total_management_effect.R`. The community table generated from this script is presented as Table 4 of the manuscript.<br>
`04-Plot_community_relations.R` - Generates Figure 3 in the manuscript<br>
`04-Plot_species_relations.R` - Generates species-specific plots showing covariate relationships (not ultimately provided in manuscript)<br>

# Source and reference scripts
`Cluster_sizes.R` - Summarizes mean and standard error of the mean for observed cluster sizes used to recover abundance estimates from model-generated estimates of cluster abundances<br>
`Data_processing.R` - Compiles data objects used to implement analysis<br>
`Functions_source.R` - Various functions referenced and used throughout this repository<br>
`model_path.nimble` - Defines model structure referenced for fitting with NIMBLE R package<br>
`ModelInits.R` - Generates and compiles values for initiating model fitting with NIMBLE<br>
`Param_list.R` - Lists parameters for NIMBLE to track during model fitting<br>
`Path_analysis_source.R` - Implements calculations for path analysis<br>
`Tabulate_community_plotting_values.R` - Sourced file that generates values displayed in plots showing diversity relationships with covariates<br>
`Tabulate_species_plotting_values.R` - Sourced file that generates values displayed in plots showing species abundance relationships with covariates (not included in manuscript)<br>
